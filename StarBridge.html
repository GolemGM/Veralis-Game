<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Veralis – StarBridge</title>
  <link rel="stylesheet" href="css/style.css" />
  <script defer src="js/auth.js"></script>
  <script defer src="js/logout.js"></script>
  <script defer src="js/lang.js"></script>
  <script defer src="js/events.js"></script>
  <script defer src="js/devlogs.js"></script>

  <!-- Script ovladani jazyka -->
  
  <script>
    const langParam = new URLSearchParams(window.location.search).get("lang");
    const currentLang = langParam === "cs" ? "cs" : "en";

    const token = localStorage.getItem("token");
    if (!token) {
      window.location.href = `login.html?lang=${currentLang}`;
    }

    if (typeof loadLanguage === "function") {
      loadLanguage(currentLang);
    }
  </script>
  
</head>
<body>
  <div class="page-wrapper">
    <header class="site-header">
      <div class="header-inner">
        <div class="logo">
          <img src="images/veralis_logo_transparent512.png" alt="VERALIS">
        </div>
        <div class="header-center">
          <button class="gold-button enter-btn" data-i18n="enterGame">🚀 Enter the Game</button>
        </div>
        <div class="header-buttons">
          <button class="exit-btn">
            <span style="font-size: 22px; color: black;">⬅</span> Exit
          </button>
        </div>
      </div>  
    </header>

    <main class="content-wrapper">
      <section class="panel devlogs">
        <h2 data-i18n="devlogHeader">🛠️ Patch Notes & Dev Logs</h2>
        <div class="devlog-section">
          <h2>🛠️ Devlogy</h2>
          <div id="devlog-list"><div class="event-row">Načítám...</div></div>
        </div>
      </section>

      <section class="panel events">
        <h2 data-i18n="eventHeader">📡 Star News Reporter</h2>
        <div class="event-section">
          <h2 data-i18n="eventHeader">📡 Hlášení</h2>
          <div id="event-list"><div class="event-row">Načítám...</div></div>
        </div>
      </section>
    </main>

    <footer class="site-footer" data-i18n="footer">&copy; Veralis Project 2025</footer>
  </div>
  
  <!-- Script ovladani Enter Exit -->
  
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const enterBtn = document.querySelector(".enter-btn");
    const exitBtn = document.querySelector(".exit-btn");

    if (enterBtn) {
      enterBtn.addEventListener("click", () => {
        window.location.href = "https://golemgm.github.io/Veralis-Promo/demogame.html";
      });
    }

    if (exitBtn) {
      exitBtn.addEventListener("click", () => {
        localStorage.removeItem("token");
        const langParam = new URLSearchParams(window.location.search).get("lang") || "en";
        const loginTarget = langParam === "cs"
          ? "https://golemgm.github.io/Veralis-Promo/login.html"
          : "https://golemgm.github.io/Veralis-Promo/en/login.html";
        window.location.href = loginTarget;
      });
    }
  });
</script>


</body>
</html>
